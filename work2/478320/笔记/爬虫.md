# 爬虫

正则表达式的两个作用

1. 校验字符串
2. 在一段文本中查找满足要求的内容

爬虫有本地爬虫和网络爬虫

## 本地爬虫

在正式爬取之前要先介绍两个类

1. Pattern：表示正则表达式，能获取它的对象相当于获取了正则表达式的对象
2. Matcher：文本匹配器，作用按照正则表达式的规则去读取字符串，从头开始读取，在大串中去找符合规则的子串

第一步获取正则表达式的对象，这个对象不能直接new，是通过Pattern的静态方法compile（正则表达式）来获取的

获取一个文本匹配器对象，这个对象由Pattern的实例方法matcher（String）获取，这个文本匹配器将会在String内找到所有符合正则表达式的对象

这个文本匹配器对象有一个find（）方法会做一个布尔类型的返回，拿着文本匹配器重头开始获取，找到是否有满足规则的字串，没有返回false，有返回true在底层记录字串的起始索引和结束索引+1

这个文本匹配器会有一共group方法，这个方法底层会根据find方法记录的索引进行字符串的截取，底层是subString(起始索引，结束索引)包头不包尾，所以上面才需要结束索引加一，截取完后会把截取的小串进行返回，这次只会返回一个符合相关条件的字符，第二次再调用find方法的时候（我们可以继续使用上面定义的布尔变量，它会被新的find重新赋值）会继续读取后面的内容，整体我们需要使用循环来改进，条件为m.find成立，方法体为，group方法

## 网络爬取

混个眼熟

创建一个URL的对象（String）内部写网址

获取一个URLConnection的对象从URL的openConnection方法来获取连接这个网址，要保证网路畅通

创建一个BufferedReader对象来读取网络中的数据，自定义一个String类的line=这个对象的readline静态方法，在读取时每次读一整行，这个对象最后要记得关闭

这样读取的数据是所有的数据，不一定是我们想要的数据，所以这个时候就要使用我们的Pattern，和matcher来完成就可以实现爬取网络里我们想要的信息

## 两个爬取数据小细节

### 有条件的爬取数据

就是我爬取Java加版本号的时候，要求爬取出来的内容只要Java不要版本号，我该怎么爬取呢，我爬取除了8，11，17的Java文本呢

我们在正则表达式可以用(?=8|11|17)来表示替代的占位符意思就是我要获取?前面的数据Java后面的等于表示在Java后面要跟随的数据，但是在获取的时候只获取前半部分

?:表示获取整体的东西，可以满足需求2（以前的方法也可以）

?!表示去除后面的东西，可以满足需求3

### 贪婪爬取，和非贪婪爬取

abbbbbbbbbbbaaaaaaaaaaaaa

按照ab+的方式爬取ab，b尽可能多获取

按照ab+的方式爬取ab，b尽可能少获取

这时候使用ab+的时候ab符合要求，abbb也符合要求，我爬取哪一个呢

贪婪爬取，在爬取数据的时候尽可能多获取数据

非贪婪爬取，在爬取数据的时候尽可能少获取数据

Java当中默认的是贪婪爬取，如果我们在数量词的后面加上？就是非贪婪爬取

## 正则表达式在字符串方法中的使用

1. public boolean matches（String regex）判断字符串是否满足正则表达式的规则

2. public String replaceAll（String regex，String newStr）按照正则表达式的规则进行替换，只要满足这一规则就进行替换，这个替换的过程就是不断爬取的过程的使用

3. public String[] split（String regex）按照正则表达式的规则来切割字符串,剪掉不要

   在String类中有很多方法，我怎么知道那些是要用正则表达式，那些是不用的呢，如果一个方法的形参叫做regex那么这个方法就一定符合正则表达式